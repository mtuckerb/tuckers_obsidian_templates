<%* 
console.log("setting title")
let title
if (tp.file.title != "Untitled" ) {
 title =  tp.file.title 
}else {
 title =  await tp.system.prompt("Title")
}

if (!title) {return}
if (title == "Untitled" || title == "" || title == "") {
	await this.app.vault
	.trash(await app.vault.getFileByPath(tp.file.path(1))); 
	await this.app.vaule.delete(`.${title}`)
	return
}
const today =  await tp.date.now("MM/DD")
if (tp.file.folder(1) == "/") {
	await tp.file.move(`${tp.date.now("YYYY/MM/DD")}/${title}`)
	console.log(`moved  ${title} to daily note folder`)} 
else{ 
	console.log(`File created in: ${tp.file.folder(1)}`)
	const dest = `/${tp.file.folder(1)}/${title}`
	console.log(dest)
	try {await tp.file.move(dest)} catch(e) { 
		
		console.log(`rename failed ${e}`)
	}
} 
-%>
<% tp.file.include("[[Supporting/Templates/10. Base]]")%>


<% tp.file.cursor() %>